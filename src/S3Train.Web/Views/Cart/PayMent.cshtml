@using S3Train.Web.Models;
@model PayMentViewModel

@{
    ViewBag.Title = "Payment";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<div class="container">
    <div class="Payment"> 
        <div class="info ">
            <p>Payment</p>
            <hr />
            <p>Shipping Address</p>
            <b><span>@Model.User.FullName</span><span>@Model.User.PhoneNumber</span></b><span>@Model.User.Address</span><a href="@Url.Action("AddAddress", "Cart")">Change</a>
        </div>
        <div>

        </div><br />
        <div class="order-pro">
            <table>
                <tr>
                    <th>Product</th>
                    <th></th>
                    <th>Price</th>
                    <th>Quatity</th>
                    <th>Total</th>
                </tr>
                @foreach (var item in Model.Cart)
                {
                    <tr>
                        <td><img src="@Url.Content("~/ImagePD/" + item.Products.ImagePath)" /></td>
                        <td>@item.Products.NameProduct</td>
                        <td>$@(Convert.ToDouble(item.Products.Price) - (Convert.ToDouble(item.Products.Price) * item.PromotionPercent / 100))</td>
                        <td>@item.Amount</td>
                        <td>@((Convert.ToDouble(item.Products.Price) - (Convert.ToDouble(item.Products.Price) * item.PromotionPercent / 100)) * item.Amount) </td>

                    </tr>
                }
            </table>
        </div>
        <div class="clearfix"></div>
        <div class="order-total">
            @{
                if (@Model.Cart.Sum(m => m.Amount * m.Products.Price) >= 20)
                {

                    <h5>Total: $@Model.Cart.Sum(m => m.Amount * m.Products.Price)</h5>
                    <h5>Delivery Charges: 0</h5>
                    <h5>Total payment: $@Model.Cart.Sum(m => m.Amount * m.Products.Price)</h5>
                }
                else
                {
                    <h5>Total: $@Model.Cart.Sum(m => m.Amount * m.Products.Price)</h5>
                    <h5>Delivery Charges: $5</h5>
                    <h5>Total payment: $@Model.Cart.Sum(m => m.Amount * m.Products.Price + 5)</h5>
                }
            }  <a href="@Url.Action("Order", "Cart", null)" onclick="alert('You have successfully placed an order. Thanks!')">Place Order</a>
        </div>
    </div>
</div>
